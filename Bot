-- Carregar Rayfield
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/hakai0fc/SiriusSoftWareLtd/refs/heads/main/RayfieldSource'))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Configurações
local AimbotEnabled = false
local TeamCheck = true
local WallCheck = true
local FOVRadius = 100
local ESPEnabled = false
local ESPTeamCheck = true
local HighlightColor = Color3.fromRGB(255, 0, 0)
local FOVRainbow = false
local FOVColor = Color3.fromRGB(0, 255, 0)

-- Criar FOV
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AimbotFOV_UI"
ScreenGui.Parent = game.CoreGui
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false

local FOVCircle = Instance.new("Frame")
FOVCircle.Name = "AimbotFOV_FOV"
FOVCircle.Parent = ScreenGui
FOVCircle.AnchorPoint = Vector2.new(0.5, 0.5)
FOVCircle.Position = UDim2.new(0.5,0,0.5,0)
FOVCircle.Size = UDim2.new(0, FOVRadius*2, 0, FOVRadius*2)
FOVCircle.BackgroundTransparency = 1
FOVCircle.Visible = false

local UIStroke = Instance.new("UIStroke", FOVCircle)
UIStroke.Thickness = 2
UIStroke.Color = FOVColor

local UICorner = Instance.new("UICorner", FOVCircle)
UICorner.CornerRadius = UDim.new(1,0)

-- Criar janela Rayfield
local Window = Rayfield:CreateWindow({
	Name = "Aimbot FOV",
	LoadingTitle = "Carregando...",
	LoadingSubtitle = "By HAKAI",
	ConfigurationSaving = {Enabled=true, FolderName="AimbotFOV", FileName="settings"},
	KeySystem=false
})

-- Main Tab
local MainTab = Window:CreateTab("Main",4483362458)
MainTab:CreateToggle({
	Name = "Ativar Aimbot",
	CurrentValue = false,
	Callback = function(v)
		AimbotEnabled = v
		FOVCircle.Visible = v
	end
})
MainTab:CreateToggle({
	Name = "Team Check",
	CurrentValue = true,
	Callback = function(v) TeamCheck = v end
})
MainTab:CreateToggle({
	Name = "Wall Check",
	CurrentValue = true,
	Callback = function(v) WallCheck = v end
})
MainTab:CreateTextbox({
	Name = "Tamanho do FOV",
	PlaceholderText = "Digite um valor de 1 a 300",
	Text = tostring(FOVRadius),
	RemoveTextAfterFocusLost=false,
	Callback = function(value)
		local num = tonumber(value)
		if num then
			if num<1 then num=1 end
			if num>300 then num=300 end
			FOVRadius=num
			FOVCircle.Size=UDim2.new(0,FOVRadius*2,0,FOVRadius*2)
		end
	end
})

-- ESP Tab
local ESPTab = Window:CreateTab("ESP",4483362458)
ESPTab:CreateToggle({
	Name="Ativar Highlight",
	CurrentValue=false,
	Callback=function(v)
		ESPEnabled=v
		for _,p in ipairs(Players:GetPlayers()) do
			if p~=LocalPlayer and p.Character then
				local h=p.Character:FindFirstChild("ESPHighlight")
				if h then h.Enabled = v and (not ESPTeamCheck or p.Team~=LocalPlayer.Team) end
			end
		end
	end
})
ESPTab:CreateToggle({
	Name="Team Check Highlight",
	CurrentValue=true,
	Callback=function(v)
		ESPTeamCheck=v
		for _,p in ipairs(Players:GetPlayers()) do
			if p~=LocalPlayer and p.Character then
				local h=p.Character:FindFirstChild("ESPHighlight")
				if h then h.Enabled=ESPEnabled and (not v or p.Team~=LocalPlayer.Team) end
			end
		end
	end
})
ESPTab:CreateColorPicker({
	Name="Cor do Highlight",
	Color=HighlightColor,
	Callback=function(v)
		HighlightColor=v
		for _,p in ipairs(Players:GetPlayers()) do
			local h=p.Character and p.Character:FindFirstChild("ESPHighlight")
			if h then h.FillColor=v h.OutlineColor=v end
		end
	end
})

-- Visual Tab
local VisualTab = Window:CreateTab("Visual",4483362458)
VisualTab:CreateToggle({
	Name="FOV Arco-íris",
	CurrentValue=false,
	Callback=function(v) FOVRainbow=v end
})
VisualTab:CreateColorPicker({
	Name="Cor do FOV",
	Color=FOVColor,
	Callback=function(v)
		FOVColor=v
		if not FOVRainbow then UIStroke.Color=v end
	end
})

-- Optimização Tab
local OptimTab = Window:CreateTab("Otimização",4483362458)
OptimTab:CreateButton({
	Name="Otimizar Ping (menos uso de rede)",
	Callback=function()
		for _,obj in ipairs(workspace:GetDescendants()) do
			if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam") then obj.Enabled=false
			elseif obj:IsA("Explosion") then obj.Visible=false end
		end
		pcall(function() settings().Physics.AllowSleep=true end)
		pcall(function() settings().Physics.PhysicsEnvironmentalThrottle=Enum.EnviromentalPhysicsThrottle.Default end)
		Rayfield:Notify({Title="Ping Otimizado",Content="Redução do uso de rede aplicada",Duration=5})
	end
})
local FPSUnlocker=false
OptimTab:CreateToggle({
	Name="FPS Unlocker (sem limite)",
	CurrentValue=false,
	Callback=function(v) FPSUnlocker=v if v then pcall(setfpscap,1000) else pcall(setfpscap,60) end end
})

-- Highlight
local function ApplyHighlight(player)
	if not player.Character then return end
	local h=player.Character:FindFirstChild("ESPHighlight")
	if h then h:Destroy() end
	local hl=Instance.new("Highlight")
	hl.Name="ESPHighlight"
	hl.FillTransparency=1
	hl.OutlineTransparency=0
	hl.FillColor=HighlightColor
	hl.OutlineColor=HighlightColor
	hl.Enabled=ESPEnabled and (not ESPTeamCheck or player.Team~=LocalPlayer.Team)
	hl.Parent=player.Character
end

local function SetupHighlight(player)
	if player~=LocalPlayer then
		player.CharacterAdded:Connect(function()
			repeat task.wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")
			ApplyHighlight(player)
		end)
	end
end

for _,p in ipairs(Players:GetPlayers()) do
	SetupHighlight(p)
	if p.Character then ApplyHighlight(p) end
end
Players.PlayerAdded:Connect(SetupHighlight)

-- Aimbot
local function GetClosestTarget()
	local closest=nil
	local shortest=FOVRadius
	local center=Vector2.new(Camera.ViewportSize.X/2,Camera.ViewportSize.Y/2)
	for _,p in ipairs(Players:GetPlayers()) do
		if p==LocalPlayer then goto continue end
		local hrp=p.Character and p.Character:FindFirstChild("HumanoidRootPart")
		if not hrp then goto continue end
		if TeamCheck and p.Team==LocalPlayer.Team then goto continue end
		local pos,onScreen=Camera:WorldToViewportPoint(hrp.Position)
		if not onScreen then goto continue end
		local dist=(Vector2.new(pos.X,pos.Y)-center).Magnitude
		if dist>shortest then goto continue end
		if WallCheck then
			local origin=Camera.CFrame.Position
			local dir=(hrp.Position-origin).Unit*1000
			local ray=RaycastParams.new()
			local filter={LocalPlayer.Character}
			ray.FilterDescendantsInstances=filter
			ray.FilterType=Enum.RaycastFilterType.Blacklist
			local res=workspace:Raycast(origin,dir,ray)
			if res and res.Instance and res.Instance:IsDescendantOf(p.Character) then
				closest=p
				shortest=dist
			end
		else
			closest=p
			shortest=dist
		end
		::continue::
	end
	return closest
end

RunService.RenderStepped:Connect(function()
	if FOVRainbow then UIStroke.Color=Color3.fromHSV(tick()%5/5,1,1) end
	if AimbotEnabled then
		local t=GetClosestTarget()
		if t and t.Character and t.Character:FindFirstChild("HumanoidRootPart") then
			Camera.CFrame=Camera.CFrame:Lerp(CFrame.new(Camera.CFrame.Position,t.Character.HumanoidRootPart.Position),0.4)
		end
	end
end)