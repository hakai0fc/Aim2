local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/hakai0fc/SiriusSoftWareLtd/refs/heads/main/RayfieldSource'))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local TweenService = game:GetService("TweenService")

local AimbotEnabled = false
local TeamCheck = true
local WallCheck = true
local FOVRadius = 100
local ESPEnabled = false
local ESPTeamCheck = true
local HighlightColor = Color3.fromRGB(255, 0, 0)
local FOVRainbow = false
local FOVColor = Color3.fromRGB(0, 255, 0)

local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false

local FOVCircle = Instance.new("Frame")
FOVCircle.Name = "FOV"
FOVCircle.Parent = ScreenGui
FOVCircle.AnchorPoint = Vector2.new(0.5, 0.5)
FOVCircle.Position = UDim2.new(0.5, 0, 0.5, 0)
FOVCircle.Size = UDim2.new(0, FOVRadius * 2, 0, FOVRadius * 2)
FOVCircle.BackgroundTransparency = 1

local UIStroke = Instance.new("UIStroke", FOVCircle)
UIStroke.Thickness = 2
UIStroke.Color = FOVColor

local UICorner = Instance.new("UICorner", FOVCircle)
UICorner.CornerRadius = UDim.new(1, 0)

local Window = Rayfield:CreateWindow({
	Name = "Aimbot FOV",
	LoadingTitle = "Carregando...",
	LoadingSubtitle = "By HAKAI",
	ConfigurationSaving = {
		Enabled = true,
		FolderName = "AimbotFOV",
		FileName = "settings"
	},
	KeySystem = false
})

-- Aba Principal
local Tab = Window:CreateTab("Main", 4483362458)
Tab:CreateToggle({
	Name = "Ativar Aimbot",
	CurrentValue = false,
	Callback = function(value)
		AimbotEnabled = value
		FOVCircle.Visible = value
	end
})
Tab:CreateToggle({
	Name = "Team Check",
	CurrentValue = true,
	Callback = function(value)
		TeamCheck = value
	end
})
Tab:CreateToggle({
	Name = "Wall Check",
	CurrentValue = true,
	Callback = function(value)
		WallCheck = value
	end
})
Tab:CreateTextbox({
    Name = "Tamanho do FOV",
    PlaceholderText = "Digite um valor de 1 a 300",
    Text = tostring(FOVRadius),
    RemoveTextAfterFocusLost = false,
    Callback = function(value)
        local num = tonumber(value)
        if num then
            if num < 1 then num = 1 end
            if num > 300 then num = 300 end
            FOVRadius = num
            FOVCircle.Size = UDim2.new(0, FOVRadius * 2, 0, FOVRadius * 2)
        end
    end
})

-- Aba ESP
local ESPTab = Window:CreateTab("ESP", 4483362458)
ESPTab:CreateToggle({
	Name = "Ativar Highlight",
	CurrentValue = false,
	Callback = function(value)
		ESPEnabled = value
		for _, player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				local highlight = player.Character and player.Character:FindFirstChild("ESPHighlight")
				if highlight then
					highlight.Enabled = value and (not ESPTeamCheck or player.Team ~= LocalPlayer.Team)
				end
			end
		end
	end
})
ESPTab:CreateToggle({
	Name = "Team Check Highlight",
	CurrentValue = true,
	Callback = function(value)
		ESPTeamCheck = value
		for _, player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				local highlight = player.Character and player.Character:FindFirstChild("ESPHighlight")
				if highlight then
					highlight.Enabled = ESPEnabled and (not value or player.Team ~= LocalPlayer.Team)
				end
			end
		end
	end
})
ESPTab:CreateColorPicker({
	Name = "Cor do Highlight",
	Color = HighlightColor,
	Callback = function(value)
		HighlightColor = value
		for _, player in ipairs(Players:GetPlayers()) do
			local highlight = player.Character and player.Character:FindFirstChild("ESPHighlight")
			if highlight then
				highlight.OutlineColor = value
				highlight.FillColor = value
			end
		end
	end
})

-- Aba Visual
local VisualTab = Window:CreateTab("Visual", 4483362458)
VisualTab:CreateToggle({
	Name = "FOV Arco-íris",
	CurrentValue = false,
	Callback = function(value)
		FOVRainbow = value
	end
})
VisualTab:CreateColorPicker({
	Name = "Cor do FOV",
	Color = FOVColor,
	Callback = function(value)
		FOVColor = value
		if not FOVRainbow then
			UIStroke.Color = value
		end
	end
})

-- Aba Otimização
local OptimTab = Window:CreateTab("Otimização", 4483362458)
OptimTab:CreateButton({
    Name = "Otimizar Ping (menos uso de rede)",
    Callback = function()
        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam") then
                obj.Enabled = false
            elseif obj:IsA("Explosion") then
                obj.Visible = false
            end
        end
        settings().Physics.AllowSleep = true
        settings().Physics.PhysicsEnvironmentalThrottle = Enum.EnviromentalPhysicsThrottle.Default
        game:GetService("Lighting").GlobalShadows = false
        game:GetService("Lighting").FogEnd = 100000
        workspace.Terrain.WaterWaveSize = 0
        workspace.Terrain.WaterWaveSpeed = 0
        workspace.Terrain.WaterReflectance = 0
        workspace.Terrain.WaterTransparency = 1
        for _, gui in ipairs(game.CoreGui:GetDescendants()) do
            if gui:IsA("ImageLabel") or gui:IsA("ImageButton") then
                gui.ImageTransparency = 0.2
            end
        end

        Rayfield:Notify({
            Title = "Ping Otimizado",
            Content = "Redução do uso de rede aplicada. Pode ajudar em PvP.",
            Duration = 5
        })
    end
})

local FPSUnlockerEnabled = false
OptimTab:CreateToggle({
	Name = "FPS Unlocker (sem limite de 60 FPS)",
	CurrentValue = false,
	Callback = function(value)
		FPSUnlockerEnabled = value
		if value then
			setfpscap(1000)
		else
			setfpscap(60)
		end
	end
})

-- Highlight
local function ApplyHighlight(player)
	if not player.Character then return end
	local existing = player.Character:FindFirstChild("ESPHighlight")
	if existing then existing:Destroy() end

	local highlight = Instance.new("Highlight")
	highlight.Name = "ESPHighlight"
	highlight.FillTransparency = 1
	highlight.OutlineTransparency = 0
	highlight.OutlineColor = HighlightColor
	highlight.FillColor = HighlightColor
	highlight.Enabled = ESPEnabled and (not ESPTeamCheck or player.Team ~= LocalPlayer.Team)
	highlight.Parent = player.Character
end

local function SetupCharacterHighlight(player)
	if player ~= LocalPlayer then
		player.CharacterAdded:Connect(function()
			repeat task.wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")
			ApplyHighlight(player)
		end)
	end
end

for _, player in ipairs(Players:GetPlayers()) do
	SetupCharacterHighlight(player)
	if player.Character then
		ApplyHighlight(player)
	end
end

Players.PlayerAdded:Connect(function(player)
	SetupCharacterHighlight(player)
end)

-- Aimbot
local function GetClosestTarget()
	local closest = nil
	local shortestDist = FOVRadius
	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			if TeamCheck and player.Team == LocalPlayer.Team then continue end
			local pos, onScreen = Camera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position)
			if onScreen then
				local center = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
				local dist = (Vector2.new(pos.X, pos.Y) - center).Magnitude
				if dist <= shortestDist then
					if WallCheck then
						local origin = Camera.CFrame.Position
						local direction = (player.Character.HumanoidRootPart.Position - origin).Unit * 1000
						local raycastParams = RaycastParams.new()
						raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
						raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
						local result = workspace:Raycast(origin, direction, raycastParams)
						if result and result.Instance:IsDescendantOf(player.Character) then
							closest = player
							shortestDist = dist
						end
					else
						closest = player
						shortestDist = dist
					end
				end
			end
		end
	end
	return closest
end

RunService.RenderStepped:Connect(function()
	if FOVRainbow then
		local hue = tick() % 5 / 5
		local color = Color3.fromHSV(hue, 1, 1)
		UIStroke.Color = color
	end

	if AimbotEnabled then
		local target = GetClosestTarget()
		if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
			local head = target.Character.HumanoidRootPart.Position
			local camPos = Camera.CFrame.Position
			local newCF = CFrame.new(camPos, head)
			Camera.CFrame = Camera.CFrame:Lerp(newCF, 0.4)
		end
	end
end)