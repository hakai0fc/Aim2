local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/hakai0fc/SiriusSoftWareLtd/refs/heads/main/RayfieldSource'))()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local AimbotEnabled = false
local TeamCheck = true
local WallCheck = true
local FOVRadius = 100
local ESPEnabled = false
local ESPTeamCheck = true
local HighlightColor = Color3.fromRGB(255, 0, 0)
local FOVRainbow = false
local FOVColor = Color3.fromRGB(0, 255, 0)
local AimPart = "Head"
local AimSpeed = 0.96
local PredictionMultiplier = 0.16
local targetUpdateInterval = 0.001

local UnstickExtra = 10
local LockedTarget = nil

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AimbotFOVGui"
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local FOVCircle = Instance.new("Frame")
FOVCircle.Name = "FOV"
FOVCircle.Parent = ScreenGui
FOVCircle.AnchorPoint = Vector2.new(0.5, 0.5)
FOVCircle.Position = UDim2.new(0.5, 0, 0.5, 0)
FOVCircle.Size = UDim2.new(0, FOVRadius * 2, 0, FOVRadius * 2)
FOVCircle.BackgroundTransparency = 1
FOVCircle.Visible = false

local UIStroke = Instance.new("UIStroke", FOVCircle)
UIStroke.Thickness = 2
UIStroke.Color = FOVColor

local UICorner = Instance.new("UICorner", FOVCircle)
UICorner.CornerRadius = UDim.new(1, 0)

Camera:GetPropertyChangedSignal("ViewportSize"):Connect(function()
	FOVCircle.Position = UDim2.new(0.5, 0, 0.5, 0)
	FOVCircle.Size = UDim2.new(0, FOVRadius * 2, 0, FOVRadius * 2)
end)

local Window = Rayfield:CreateWindow({
	Name = "HAKAI Aimbot",
	LoadingTitle = "Carregando...",
	LoadingSubtitle = "By HAKAI",
	ConfigurationSaving = {
		Enabled = true,
		FolderName = "HAKAI Aimbot",
		FileName = "settings"
	},
	KeySystem = false
})

local Tab = Window:CreateTab("Principal", 4483362458)

Tab:CreateToggle({
	Name = "Ativar Aimbot",
	CurrentValue = false,
	Callback = function(value)
		AimbotEnabled = value
		FOVCircle.Visible = value
	end
})

Tab:CreateToggle({
	Name = "Verificar Times",
	CurrentValue = true,
	Callback = function(value)
		TeamCheck = value
	end
})

Tab:CreateToggle({
	Name = "Verificar Paredes",
	CurrentValue = true,
	Callback = function(value)
		WallCheck = value
	end
})

Tab:CreateSlider({
	Name = "Tamanho do FOV",
	Range = {0, 300},
	Increment = 1,
	CurrentValue = FOVRadius,
	Callback = function(value)
		FOVRadius = value
		FOVCircle.Size = UDim2.new(0, value * 2, 0, value * 2)
		FOVCircle.Visible = value > 0 and AimbotEnabled
	end
})

Tab:CreateSlider({
	Name = "AimSpeed (quão grudado)",
	Range = {0, 100},
	Increment = 1,
	CurrentValue = math.floor(AimSpeed * 100),
	Callback = function(value)
		AimSpeed = math.clamp(value / 100, 0, 1)
	end
})

Tab:CreateSlider({
	Name = "Predição (Velocidade do Alvo)",
	Range = {0, 50},
	Increment = 1,
	CurrentValue = math.floor(PredictionMultiplier * 100),
	Callback = function(value)
		PredictionMultiplier = math.clamp(value / 100, 0, 0.5)
	end
})

local ESPTab = Window:CreateTab("ESP", 4483362458)

local DefaultTeamColors = {}
for _, team in ipairs(game:GetService("Teams"):GetTeams()) do
	DefaultTeamColors[team.Name] = team.TeamColor.Color
end

ESPTab:CreateToggle({
	Name = "Ativar Destaque (Highlight)",
	CurrentValue = false,
	Callback = function(value)
		ESPEnabled = value
		for _, player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				local highlight = player.Character and player.Character:FindFirstChild("ESPHighlight")
				if highlight then
					if ESPTeamCheck then
						highlight.OutlineColor = player.Team.TeamColor.Color
						highlight.FillColor = player.Team.TeamColor.Color
					else
						highlight.OutlineColor = HighlightColor
						highlight.FillColor = HighlightColor
					end
					highlight.Enabled = value and (not ESPTeamCheck or player.Team ~= LocalPlayer.Team)
				end
			end
		end
	end
})

ESPTab:CreateToggle({
	Name = "Team Check ESP",
	CurrentValue = true,
	Callback = function(value)
		ESPTeamCheck = value
		for _, player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				local highlight = player.Character and player.Character:FindFirstChild("ESPHighlight")
				if highlight then
					highlight.Enabled = ESPEnabled and (not value or player.Team ~= LocalPlayer.Team)
				end
			end
		end
	end
})

ESPTab:CreateColorPicker({
	Name = "Cor do Destaque",
	Color = Color3.fromRGB(255, 0, 0),
	Callback = function(value)
		HighlightColor = value
		if not ESPTeamCheck then
			for _, player in ipairs(Players:GetPlayers()) do
				local highlight = player.Character and player.Character:FindFirstChild("ESPHighlight")
				if highlight then
					highlight.OutlineColor = value
					highlight.FillColor = value
				end
			end
		end
	end
})

local VisualTab = Window:CreateTab("Visual", 4483362458)

VisualTab:CreateToggle({
	Name = "FOV Arco-Íris",
	CurrentValue = false,
	Callback = function(value)
		FOVRainbow = value
	end
})

VisualTab:CreateColorPicker({
	Name = "Cor do FOV",
	Color = FOVColor,
	Callback = function(value)
		FOVColor = value
		if not FOVRainbow then
			UIStroke.Color = value
		end
	end
})

local Lighting = game:GetService("Lighting")

local function ApplyHighlight(player)
	if not player.Character then return end
	local existing = player.Character:FindFirstChild("ESPHighlight")
	if existing then existing:Destroy() end
	local highlight = Instance.new("Highlight")
	highlight.Name = "ESPHighlight"
	highlight.FillTransparency = 1
	highlight.OutlineTransparency = 0
	highlight.OutlineColor = HighlightColor
	highlight.FillColor = HighlightColor
	highlight.Enabled = ESPEnabled and (not ESPTeamCheck or player.Team ~= LocalPlayer.Team)
	highlight.Parent = player.Character
end

for _, player in ipairs(Players:GetPlayers()) do
	if player ~= LocalPlayer then
		player.CharacterAdded:Connect(function()
			repeat task.wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")
			ApplyHighlight(player)
		end)
	end
	if player.Character then
		ApplyHighlight(player)
	end
end

Players.PlayerAdded:Connect(function(player)
	if player ~= LocalPlayer then
		player.CharacterAdded:Connect(function()
			repeat task.wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")
			ApplyHighlight(player)
		end)
	end
end)

local CloseDistanceThreshold = 4

local function GetClosestTarget()
	local closest = nil
	local shortestDist = math.huge
	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character then
			local part = player.Character:FindFirstChild(AimPart)
			if not part then continue end
			if TeamCheck and player.Team == LocalPlayer.Team then continue end
			local pos, onScreen = Camera:WorldToViewportPoint(part.Position)
			local center = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
			local screenPos = Vector2.new(pos.X, pos.Y)
			local dist = (screenPos - center).Magnitude
			if onScreen and dist <= FOVRadius then
				if WallCheck then
					local origin = Camera.CFrame.Position
					local direction = (part.Position - origin).Unit * 10000
					local raycastParams = RaycastParams.new()
					raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
					raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
					local result = workspace:Raycast(origin, direction, raycastParams)
					if result then
						if result.Instance:IsDescendantOf(player.Character) then
							if dist < shortestDist then
								closest = player
								shortestDist = dist
							end
						end
					else
						if dist < shortestDist then
							closest = player
							shortestDist = dist
						end
					end
				else
					if dist < shortestDist then
						closest = player
						shortestDist = dist
					end
				end
			end
		end
	end
	return closest
end

RunService.RenderStepped:Connect(function()
	if FOVRainbow then
		local hue = tick() % 5 / 5
		UIStroke.Color = Color3.fromHSV(hue, 1, 1)
	end
	if not AimbotEnabled then
		LockedTarget = nil
		return
	end
	if LockedTarget and LockedTarget.Character and LockedTarget.Character:FindFirstChild(AimPart) then
		local part = LockedTarget.Character[AimPart]
		local pos, onScreen = Camera:WorldToViewportPoint(part.Position)
		local center = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
		local screenPos = Vector2.new(pos.X, pos.Y)
		local dist = (screenPos - center).Magnitude
		if dist > (FOVRadius + UnstickExtra) then
			LockedTarget = nil
		end
	end
	if not LockedTarget then
		LockedTarget = GetClosestTarget()
	end
	if LockedTarget and LockedTarget.Character then
		local part = LockedTarget.Character:FindFirstChild(AimPart)
		if part then
			local headPos = part.Position
			local camPos = Camera.CFrame.Position
			local distance = (headPos - camPos).Magnitude
			local lerpAmount = math.clamp(AimSpeed, 0, 1)
			local predicted = headPos + (part.Velocity or Vector3.new()) * PredictionMultiplier
			local newCF = CFrame.new(camPos, predicted)
			if distance <= CloseDistanceThreshold then
				Camera.CFrame = Camera.CFrame:Lerp(newCF, 1)
			else
				Camera.CFrame = Camera.CFrame:Lerp(newCF, lerpAmount)
			end
		end
	end
end)